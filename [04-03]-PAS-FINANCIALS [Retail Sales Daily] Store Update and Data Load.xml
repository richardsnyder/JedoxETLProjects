<?xml version="1.0" encoding="UTF-8"?>
<project name="[04-03]-PAS-FINANCIALS [Retail Sales Daily] Store Update and Data Load" version="20.3" modified="1602552321972" modifiedBy="ONEPAS\richards" olapId="p8">
  <headers>
    <header name="comment" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[All the ETL processes required to load the Retail Sales Weekly cube
This project is dependent upon the Rtl ETL process to build the store dimension used by the Retail Sales Weekly cube.]]></comment>
    </header>
  </headers>
  <variables>
    <variable modified="1602549733166" name="Forecast_MMM" modifiedBy="ONEPAS\richards">
      <comment />
      <default>Forecast_Dec</default>
    </variable>
    <variable modified="1602549733166" name="CurrYear" modifiedBy="ONEPAS\richards">
      <comment />
    </variable>
    <variable modified="1602549733166" name="PrevYear" modifiedBy="ONEPAS\richards">
      <comment />
      <default>2017</default>
    </variable>
    <variable modified="1602549733166" name="BudYear" modifiedBy="ONEPAS\richards">
      <comment />
      <default>2019</default>
    </variable>
    <variable name="FYear" modified="1602549733166" modifiedBy="ONEPAS\richards" />
    <variable modified="1602549733166" name="Version" modifiedBy="ONEPAS\richards">
      <comment />
    </variable>
  </variables>
  <connections>
    <connection modified="1602552249999" name="DW" type="Sqlserver" modifiedBy="ONEPAS\richards">
      <global nameref="DW" />
    </connection>
    <connection modified="1602549733166" name="Jedox" type="JedoxOlap" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[This is the "main" Jedox connection that is used for all connections to the PAS-DEV database.]]></comment>
      <global nameref="localhost" />
      <database>PAS-FINANCIALS</database>
      <ssl>off</ssl>
    </connection>
    <connection name="file-SalesDailyUpdate" type="File" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <location type="FileSystem" />
      <comment><![CDATA[Used for sending the SalesDaily update times in an email.]]></comment>
      <database>C:\Program Files\Jedox\Jedox Suite\tomcat\client\SailesDailyUpdate.txt</database>
      <header>true</header>
      <delimiter>,</delimiter>
      <quote>#none</quote>
      <enableEscape>false</enableEscape>
    </connection>
    <connection name="file-Test" type="File" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <location type="FileSystem" />
      <database>TestingFile.csv</database>
      <header>true</header>
      <delimiter>,</delimiter>
      <quote>"</quote>
      <ssl>verify</ssl>
      <enableEscape>false</enableEscape>
    </connection>
    <connection modified="1602549733166" name="MetalicusDailySales" type="File" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Used for sending the SalesDaily update times in an email.]]></comment>
      <location type="FileSystem" />
      <database>C:\Program Files\Jedox\Jedox Suite\tomcat\client\MetalicusDailySales.csv</database>
      <header>true</header>
      <delimiter>,</delimiter>
      <quote>#none</quote>
      <enableEscape>false</enableEscape>
    </connection>
  </connections>
  <extracts>
    <extract name="ex-Jedox [Cube]: Retail Sales Daily (Z-Out: Actuals)" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extract from Weekly Retail Sales cube used to zero out the "Comp Type".
NOTE: This is only used for the actual/Forecast load at this stage.
NOTE: Manual loads will not be cleared out]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="false" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Actual]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-DW-Sales by Day" type="Relational" modifiedBy="ONEPAS\richards">
      <connection nameref="DW" />
      <query><![CDATA[DECLARE @PrevYear as int
DECLARE @CurrYear as int

Set @PrevYear = (Select ConfigurationValue from DataWarehouse.dbo.SysConfiguration where ConfigurationKey = 'ETLPrevRetailYear')
Set @CurrYear = (Select ConfigurationValue from DataWarehouse.dbo.SysConfiguration where ConfigurationKey = 'ETLCurrRetailYear')

SELECT [Version]
      ,[FYear] as [FYear]
      ,[Day] as [Day]
      ,[Currency]
      ,[Store] AS [Store]
      ,[Region]
      ,[Comp Type] AS [Comp Type]
	  ,[Dispatch Type] as [Dispatch Type]
      ,[Weekly Retail Measure] AS [Weekly Retail Measure]
      ,CASE
        WHEN [Weekly Retail Measure] = 'Number of Stores' THEN MIN([#Value])
        ELSE ROUND(SUM([#Value]),2)
       END
  AS [#VALUE]
  FROM [DataWarehouseSummarisedFactData].[dbo].[FactJedox]
  JOIN DataWarehouse.dbo.DimProfitCentre on FactJedox.Store = DimProfitCentre.Code
  LEFT OUTER JOIN DataWarehouse.dbo.DimWarehouse on DimProfitCentre.Id = DimWarehouse.ProfitCentreId
  LEFT OUTER JOIN DataWarehouse.dbo.JedoxDuplicateProfitCentres  ON JedoxDuplicateProfitCentres.WarehouseId = DimWarehouse.Id
  WHERE 1=1
  AND [FYear] Between @PrevYear and @CurrYear
  AND Version = 'ACTUAL'
  AND FactJedox.LegalEntity != 89 -- Metalicus - External Legal Entity ID
  AND JedoxDuplicateProfitCentres.WarehouseId IS NULL
  GROUP BY [Version]
      ,[FYear]
      ,[Day]
      ,[Currency]
      ,[Region]
      ,[Store]
      ,[Comp Type]
      ,[Dispatch Type]
      ,[Weekly Retail Measure]]]></query>
      <alias_map>
        <alias origin="Version">1</alias>
        <alias origin="FYear">2</alias>
        <alias origin="Day">3</alias>
        <alias origin="Currency">4</alias>
        <alias origin="Store">5</alias>
        <alias origin="Region">6</alias>
        <alias origin="Comp Type">7</alias>
        <alias origin="Dispatch Type">8</alias>
        <alias origin="Weekly Retail Measure">9</alias>
        <alias origin="#VALUE">10</alias>
      </alias_map>
    </extract>
    <extract modified="1602549733166" name="ex-DW-Forecast" type="Relational" modifiedBy="ONEPAS\richards">
      <connection nameref="DW" />
      <query><![CDATA[-- Set up variables for CurrYear and BudYear to be used by queries
Declare @CurrYear int
set @CurrYear = (SELECT ConfigurationValue from DataWarehouse.dbo.SysConfiguration where ConfigurationKey = 'ETLCurrRetailYear')
print 'Current Year ' + convert(nvarchar(4), @CurrYear)

SELECT [Version]
 ,[FYear] 
 ,[Day]
 ,[Currency] 
 ,[Region] 
 ,[Store] 
 ,[Comp Type] 
 ,[Dispatch Type] 
 ,[Weekly Retail Measure]
 ,CASE
    WHEN [Weekly Retail Measure] = 'Number of Stores' THEN MIN([#Value])
    ELSE ROUND(SUM([#Value]),2)
  END
  AS [#VALUE]
  FROM [DataWarehouseSummarisedFactData].[dbo].[FactJedox]
  INNER JOIN DataWarehouse.dbo.DimProfitCentre on FactJedox.Store = DimProfitCentre.Code
  LEFT OUTER JOIN DataWarehouse.dbo.DimWarehouse on DimProfitCentre.Id = DimWarehouse.ProfitCentreId	
  LEFT OUTER JOIN DataWarehouse.dbo.JedoxDuplicateProfitCentres  ON JedoxDuplicateProfitCentres.WarehouseId = DimWarehouse.Id
  WHERE 1=1
  AND Version = 'Forecast'
  AND FYear = @CurrYear
  AND FactJedox.LegalEntity != 89 -- Metalicus - External Legal Entity ID
  AND JedoxDuplicateProfitCentres.WarehouseId IS NULL
  GROUP BY [VERSION]
 ,[FYear] 
 ,[Day]
 ,[Currency] 
 ,[Region] 
 ,[Store] 
 ,[Comp Type] 
 ,[Dispatch Type] 
 ,[Weekly Retail Measure]
 ORDER BY DAY, Store]]></query>
      <alias_map>
        <alias origin="Version">1</alias>
        <alias origin="FYear">2</alias>
        <alias origin="Day">3</alias>
        <alias origin="Currency">4</alias>
        <alias origin="Region">5</alias>
        <alias origin="Store">6</alias>
        <alias origin="Comp Type">7</alias>
        <alias origin="Dispatch Type">8</alias>
        <alias origin="Weekly Retail Measure">9</alias>
        <alias origin="#VALUE">10</alias>
      </alias_map>
    </extract>
    <extract name="ex-Jedox [Cube]: Parameter (Prev Curr Year ETL)" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extracts value of CurrYearETL from #_Parameter cube
Used in clear out of Forecast in Retail Daily Sales cube.]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="includeEmptyDefaultMapping">
        <dimensions>
          <dimension name="#_Parameter_">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Item]]></condition>
          </dimension>
          <dimension name="Parameter">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[CurrYearETL]]></condition>
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[PrevYearETL]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Parameter" />
      </query>
    </extract>
    <extract name="ex-Jedox [Attr:Days]: RetailYear" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="#_Day_">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[RetailYear]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Day" />
      </query>
    </extract>
    <extract name="ex-Jedox [Cube]: Retail Sales Daily - Forecast" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extract from Weekly Retail Sales cube used to zero out the "Comp Type".
NOTE: This is only used for the actual/Forecast load at this stage.
NOTE: Manual loads will not be cleared out]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="false" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Forecast]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract name="ex-Jedox [Cube]: Parameter (Curr Year ETL)" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extracts value of CurrYearETL from #_Parameter cube
Used in clear out of Forecast in Retail Daily Sales cube.]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="includeEmptyDefaultMapping">
        <dimensions>
          <dimension name="#_Parameter_">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Item]]></condition>
          </dimension>
          <dimension name="Parameter">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[CurrYearETL]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Parameter" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Attr:Days]: ActualDay" type="Cube" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extracts value of CurrYearETL from #_Parameter cube
Used in clear out of Forecast in Retail Daily Sales cube.]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="excludeEmptyAndZero">
        <dimensions>
          <dimension name="#_Day_">
            <condition operator="equal" type="accept"><![CDATA[ActualDay]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Day" />
      </query>
    </extract>
    <extract name="ex-Jedox [Cube]: Retail Sales Daily Act2Forecast" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extract from Weekly Retail Sales cube used to zero out the "Comp Type".
NOTE: This is only used for the actual/Forecast load at this stage.
NOTE: Manual loads will not be cleared out]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="false" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Actual]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Attr:Days]: ForecastDay" type="Cube" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extracts value of CurrYearETL from #_Parameter cube
Used in clear out of Forecast in Retail Daily Sales cube.]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="excludeEmptyAndZero">
        <dimensions>
          <dimension name="#_Day_">
            <condition operator="equal" type="accept"><![CDATA[ForecastDay]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Day" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube]: Retail Sales Daily  (Z-Out: Forecast_MMM)" type="Cube" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extract from Weekly Retail Sales cube used to zero out the "Comp Type".
NOTE: This is only used for the actual/Forecast load at this stage.
NOTE: Manual loads will not be cleared out]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="false" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="like" type="accept"><![CDATA[Forecast_]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="Metalicus Daily Sales" type="Cube" modifiedBy="ONEPAS\richards">
      <connection nameref="Jedox" />
      <query drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition operator="equal" type="accept"><![CDATA[Actual]]></condition>
          </dimension>
          <dimension name="Store">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Metalicus (All Stores)]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube]: Retail Sales Weekly (Z-Out: Budget)" type="Cube" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extract from Weekly Retail Sales cube used to zero out the "Comp Type".
NOTE: This is only used for the actual/Forecast load at this stage.
NOTE: Manual loads will not be cleared out]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="false" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Budget]]></condition>
          </dimension>
          <dimension name="Day">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[AllDays]]></condition>
          </dimension>
          <dimension name="Region">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[All Regions]]></condition>
          </dimension>
          <dimension name="Store">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[All Stores]]></condition>
          </dimension>
          <dimension name="Weekly Retail Measure">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Weekly Retail ETL Measures]]></condition>
          </dimension>
          <dimension name="Dispatch Type">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[All Dispatch Types]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube]: Parameter - BudYearETL" type="Cube" modifiedBy="ONEPAS\richards">
      <connection nameref="Jedox" />
      <query drillthrough="false" onlyBasisAsDefault="false" useRules="false" zeroSuppressionType="includeEmptyDefaultMapping">
        <dimensions>
          <dimension name="Parameter">
            <condition operator="equal" type="accept"><![CDATA[BudYearETL]]></condition>
          </dimension>
          <dimension name="#_Parameter_">
            <condition operator="equal" type="accept"><![CDATA[Item]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Parameter" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-DW-Sales Budget" type="Relational" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[2015-01-12 RKS
The query will be replaced by a view once it has been created.]]></comment>
      <connection nameref="DW" />
      <query><![CDATA[-- Set up variables for CurrYear and BudYear to be used by queries
Declare @BudYear int
SET @BudYear = (SELECT
		ConfigurationValue
	FROM DataWarehouse.dbo.SysConfiguration
	WHERE ConfigurationKey = 'ETLBudRetailYear')
print 'Budget Year ' + convert(nvarchar(4), @BudYear)

SELECT
	[Version]
	,[Day]
	,[Currency]
	,[Region]
	,[Store]
	,[Comp Type]
	,[Dispatch Type]
	,[Weekly Retail Measure]
	,CASE
		WHEN [Weekly Retail Measure] = 'Number of Stores' THEN MIN([#Value])
		ELSE ROUND(SUM([#Value]), 2)
	END
	AS [#VALUE]
FROM [DataWarehouseSummarisedFactData].[dbo].[FactJedox]
JOIN DataWarehouse.dbo.DimProfitCentre ON FactJedox.Store = DimProfitCentre.Code
LEFT OUTER JOIN DataWarehouse.dbo.DimWarehouse ON DimProfitCentre.Id = DimWarehouse.ProfitCentreId
LEFT OUTER JOIN DataWarehouse.dbo.JedoxDuplicateProfitCentres  ON JedoxDuplicateProfitCentres.WarehouseId = DimWarehouse.Id
WHERE 1 = 1
AND Version = 'BUDGET'
AND FYear = @BudYear
AND FactJedox.LegalEntity != 89 -- Metalicus - External Legal Entity ID
AND JedoxDuplicateProfitCentres.WarehouseId IS NULL
AND [Day] <> ''
GROUP BY	[VERSION]
			,[Day]
			,[Currency]
			,[Region]
			,[Store]
			,[Comp Type]
			,[Dispatch Type]
			,[Weekly Retail Measure]]]></query>
      <alias_map>
        <alias origin="Version">1</alias>
        <alias origin="Day">2</alias>
        <alias origin="Currency">3</alias>
        <alias origin="Region">4</alias>
        <alias origin="Store">5</alias>
        <alias origin="Comp Type">6</alias>
        <alias origin="Dispatch Type">7</alias>
        <alias origin="Weekly Retail Measure">8</alias>
        <alias origin="#VALUE">9</alias>
      </alias_map>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube]: Retail Sales Daily - Forecast-DW" type="Cube" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extract from Weekly Retail Sales cube used to zero out the "Comp Type".
NOTE: This is only used for the actual/Forecast load at this stage.
NOTE: Manual loads will not be cleared out]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="false" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Forecast_DW]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-DW-Target" type="Relational" modifiedBy="ONEPAS\richards">
      <connection nameref="DW" />
      <query><![CDATA[-- Set up variables for CurrYear and BudYear to be used by queries
Declare @CurrYear int
set @CurrYear = (SELECT ConfigurationValue from DataWarehouse.dbo.SysConfiguration where ConfigurationKey = 'ETLCurrRetailYear')
print 'Current Year ' + convert(nvarchar(4), @CurrYear)

SELECT [Version]
 ,[FYear] 
 ,[Day]
 ,[Currency] 
 ,[Region] 
 ,[Store] 
 ,[Comp Type] 
 ,[Dispatch Type] 
 ,[Weekly Retail Measure]
 ,CASE
    WHEN [Weekly Retail Measure] = 'Number of Stores' THEN MIN([#Value])
    ELSE ROUND(SUM([#Value]),2)
  END
  AS [#VALUE]
  FROM [DataWarehouseSummarisedFactData].[dbo].[FactJedox]
  INNER JOIN DataWarehouse.dbo.DimProfitCentre on FactJedox.Store = DimProfitCentre.Code
  LEFT OUTER JOIN DataWarehouse.dbo.DimWarehouse on DimProfitCentre.Id = DimWarehouse.ProfitCentreId	
  LEFT OUTER JOIN DataWarehouse.dbo.JedoxDuplicateProfitCentres  ON JedoxDuplicateProfitCentres.WarehouseId = DimWarehouse.Id
  WHERE 1=1
  AND Version = 'Target'
  AND FYear = @CurrYear
  AND FactJedox.LegalEntity != 89 -- Metalicus - External Legal Entity ID
  AND JedoxDuplicateProfitCentres.WarehouseId IS NULL
  GROUP BY [VERSION]
 ,[FYear] 
 ,[Day]
 ,[Currency] 
 ,[Region] 
 ,[Store] 
 ,[Comp Type] 
 ,[Dispatch Type] 
 ,[Weekly Retail Measure]
 ORDER BY DAY, Store]]></query>
      <alias_map>
        <alias origin="Version">1</alias>
        <alias origin="FYear">2</alias>
        <alias origin="Day">3</alias>
        <alias origin="Currency">4</alias>
        <alias origin="Region">5</alias>
        <alias origin="Store">6</alias>
        <alias origin="Comp Type">7</alias>
        <alias origin="Dispatch Type">8</alias>
        <alias origin="Weekly Retail Measure">9</alias>
        <alias origin="#VALUE">10</alias>
      </alias_map>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube]: Retail Sales Daily (Z-Out: Target)" type="Cube" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extract from Weekly Retail Sales cube used to zero out the "Comp Type".
NOTE: This is only used for the actual/Forecast load at this stage.
NOTE: Manual loads will not be cleared out]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="false" zeroSuppressionType="excludeEmpty">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Target]]></condition>
          </dimension>
          <dimension name="Weekly Retail Measure">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Net Sales]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract name="ex-Jedox [Cube]: Parameter (Prev Curr Year ETL) For Loop" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extracts value of CurrYearETL from #_Parameter cube
Used in clear out of Forecast in Retail Daily Sales cube.]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="includeEmptyDefaultMapping">
        <dimensions>
          <dimension name="#_Parameter_">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Item]]></condition>
          </dimension>
          <dimension name="Parameter">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[CurrYearETL]]></condition>
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[PrevYearETL]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Parameter" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube Slice] (Z-Out: Actuals) For Loop" type="CubeSlice" modifiedBy="ONEPAS\richards">
      <connection nameref="Jedox" />
      <query mode="exclude" randomPaths="false">
        <dimensions>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Actual]]></condition>
          </dimension>
          <dimension name="Day">
            <condition mode="onlyNodes" operator="equal" type="accept"><![CDATA[${FYear}]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube]: Parameter (Curr Year ETL) For Loop" type="Cube" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Extracts value of CurrYearETL from #_Parameter cube
Used in clear out of Forecast in Retail Daily Sales cube.]]></comment>
      <connection nameref="Jedox" />
      <query celltype="both" drillthrough="false" onlyBasisAsDefault="true" useRules="true" zeroSuppressionType="includeEmptyDefaultMapping">
        <dimensions>
          <dimension name="#_Parameter_">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Item]]></condition>
          </dimension>
          <dimension name="Parameter">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[CurrYearETL]]></condition>
          </dimension>
        </dimensions>
        <cube name="#_Parameter" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube Slice] (Z-Out: Forecast Versions) For Loop" type="CubeSlice" modifiedBy="ONEPAS\richards">
      <connection nameref="Jedox" />
      <query mode="exclude" randomPaths="false">
        <dimensions>
          <dimension name="Day">
            <condition mode="onlyNodes" operator="equal" type="accept"><![CDATA[${FYear}]]></condition>
          </dimension>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[${Version}]]></condition>
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Forecast]]></condition>
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Forecast_DW]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
    <extract modified="1602549733166" name="ex-Jedox [Cube Slice] (Z-Out: Target Version) For Loop" type="CubeSlice" modifiedBy="ONEPAS\richards">
      <connection nameref="Jedox" />
      <query mode="exclude" randomPaths="false">
        <dimensions>
          <dimension name="Day">
            <condition mode="onlyNodes" operator="equal" type="accept"><![CDATA[${FYear}]]></condition>
          </dimension>
          <dimension name="Version">
            <condition mode="onlyBases" operator="equal" type="accept"><![CDATA[Target]]></condition>
          </dimension>
        </dimensions>
        <cube name="Retail Sales Daily" />
      </query>
    </extract>
  </extracts>
  <transforms>
    <transform modified="1602549733166" name="tf-FT [Cube]: Retail Sales Daily (Actuals Load)" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Matches the dimensions in the cube (Weekly Retail Sales) to the query used to extract the data
RetYear in the query to FYear in the cube etc.]]></comment>
      <sources>
        <source nameref="ex-DW-Sales by Day" />
      </sources>
      <functions>
        <function name="F_Dispatch Type" type="Map">
          <comment><![CDATA[Maps the output of the Dispatch Type from the SalesDaily table]]></comment>
          <inputs>
            <input nameref="Dispatch Type" />
          </inputs>
          <parameters>
            <default>Dispatch NA</default>
            <mapping>
              <map from="Store Sales" to="Store Sales" />
              <map from="Click and Collect" to="Click and Collect" />
              <map from="Dispatch NA" to="Dispatch NA" />
              <map from="Store to Door" to="Store to Door" />
              <map from="Warehouse Dispatch" to="Warehouse Dispatch" />
              <map from="Floor to Door" to="Floor to Door" />
            </mapping>
          </parameters>
        </function>
      </functions>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input nameref="Version" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="F_Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#VALUE" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform name="tf-TJ [Attr]: Day - Prev Curr Retail Year" type="TableJoin" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Joins the PrevYearETL and CurrYearETL values from the parameter cube to an extract of days and the retail years they belong to from the #_Days cube.
Used in the clear out of actual version prior to data load.]]></comment>
      <sources>
        <source nameref="tf-FT [Attr]: Days In Retail Year" />
        <source nameref="ex-Jedox [Cube]: Parameter (Prev Curr Year ETL)" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Attr]: Days In Retail Year">
            <key nameref="Attr#Value" />
          </left>
          <right nameref="ex-Jedox [Cube]: Parameter (Prev Curr Year ETL)">
            <key nameref="#Value" />
          </right>
        </join>
      </joins>
    </transform>
    <transform name="tf-FT [Attr]: Days In Retail Year" type="FieldTransform" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Transforms the extract of days and their retail year attribute from the #_Days cube.
Used in the clear out of the Actual version prior to data load.]]></comment>
      <sources>
        <source nameref="ex-Jedox [Attr:Days]: RetailYear" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Attr#_Day_">
            <input nameref="#_Day_" />
          </coordinate>
          <coordinate name="AttrDay">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Attr#Value">
            <input nameref="#Value" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform name="tf-TJ [Cube]: Actual - Prev Curr Retail Years" type="TableJoin" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Join the days in the previous and current retail years to an extract of data from the Retail Daily Sales Cube.
Used to clear out the Actual version prior to data load.]]></comment>
      <sources>
        <source nameref="tf-FT [Days]: Days in Prev Curr Retail Years" />
        <source nameref="ex-Jedox [Cube]: Retail Sales Daily (Z-Out: Actuals)" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Days]: Days in Prev Curr Retail Years">
            <key nameref="Day" />
          </left>
          <right nameref="ex-Jedox [Cube]: Retail Sales Daily (Z-Out: Actuals)">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform name="tf-FT [Days]: Days in Prev Curr Retail Years" type="FieldTransform" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <comment><![CDATA[Generates a list of days in the previous and current retail years
Used in clear out of actual version prior to data load.]]></comment>
      <sources>
        <source nameref="tf-TJ [Attr]: Day - Prev Curr Retail Year" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Day">
            <input nameref="AttrDay" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform name="tf-TJ [Cube]: Days (Retail Year) to CurrYearETL" type="TableJoin" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-FT [Attr]: Days In Retail Year" />
        <source nameref="ex-Jedox [Cube]: Parameter (Curr Year ETL)" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Attr]: Days In Retail Year">
            <key nameref="Attr#Value" />
          </left>
          <right nameref="ex-Jedox [Cube]: Parameter (Curr Year ETL)">
            <key nameref="#Value" />
          </right>
        </join>
      </joins>
    </transform>
    <transform name="tf-TJ [Cube]: Sales Daily - Forecast Days in CurrYearETL" type="TableJoin" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-FT [Days]: Days in Curr Retail Year" />
        <source nameref="ex-Jedox [Cube]: Retail Sales Daily - Forecast" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Days]: Days in Curr Retail Year">
            <key nameref="Day" />
          </left>
          <right nameref="ex-Jedox [Cube]: Retail Sales Daily - Forecast">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform name="tf-FT [Days]: Days in Curr Retail Year" type="FieldTransform" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-TJ [Cube]: Days (Retail Year) to CurrYearETL" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Day">
            <input nameref="AttrDay" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-FT [Attr]: Parameter - Retail Forecast Version" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-TJ [Cube]: Sales Daily - Forecast Days in CurrYearETL" />
      </sources>
      <functions>
        <function name="Retail Forecast Version" type="OlapData">
          <inputs>
            <input constant="Item" />
            <input constant="Retail ETL Forecast" />
            <input constant="~" />
          </inputs>
          <parameters>
            <connection>Jedox</connection>
            <cube>#_Parameter</cube>
          </parameters>
        </function>
      </functions>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input nameref="Retail Forecast Version" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#Value" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform name="tf-FT [Attr]: ActualDays - All Years" type="FieldTransform" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Attr:Days]: ActualDay" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="ActualDay">
            <input nameref="Day" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform name="tf-TJ [Attr]: Day - Actual Days in Current Retail Year" type="TableJoin" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-FT [Attr]: ActualDays - All Years" />
        <source nameref="tf-FT [Days]: Days in Curr Retail Year" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Attr]: ActualDays - All Years">
            <key nameref="ActualDay" />
          </left>
          <right nameref="tf-FT [Days]: Days in Curr Retail Year">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform name="tf-TJ [Attr:Cube] Sales Daily - Actual Days Current Retail Year" type="TableJoin" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Cube]: Retail Sales Daily Act2Forecast" />
        <source nameref="tf-TJ [Attr]: Day - Actual Days in Current Retail Year" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="ex-Jedox [Cube]: Retail Sales Daily Act2Forecast">
            <key nameref="Day" />
          </left>
          <right nameref="tf-TJ [Attr]: Day - Actual Days in Current Retail Year">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform name="tf-FT [Cube] Act2Forecast Actual Days" type="FieldTransform" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-TJ [Attr:Cube] Sales Daily - Actual Days Current Retail Year" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input constant="Forecast" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#Value" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-FT [Cube] Z-Out Target" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-TJ [Attr]: Day In Curr Year to Z-Out Target" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input nameref="Version" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#Value" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform name="tf-FT [Attr]: ForecastDays" type="FieldTransform" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Attr:Days]: ForecastDay" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="ForecastDay">
            <input nameref="Day" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform name="tf-TJ [Attr:Cube] Forecast Days to Forecast Extract" type="TableJoin" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-FT [Attr]: ForecastDays" />
        <source nameref="ex-DW-Forecast" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Attr]: ForecastDays">
            <key nameref="ForecastDay" />
          </left>
          <right nameref="ex-DW-Forecast">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform modified="1602549733166" name="tf-FT [Cube]: Forecast Load - Forecast Days" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-TJ [Attr:Cube] Forecast Days to Forecast Extract" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input nameref="Version" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#VALUE" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-TJ [Cube]: Sales Daily - Forecast Days in CurrYearETL (Z-Out Forecast_MMM)" type="TableJoin" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-FT [Days]: Days in Curr Retail Year" />
        <source nameref="tf-FT [Attr]: Parameter - Retail Forecast Version - Z-Out Forecast_MMM" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Days]: Days in Curr Retail Year">
            <key nameref="Day" />
          </left>
          <right nameref="tf-FT [Attr]: Parameter - Retail Forecast Version - Z-Out Forecast_MMM">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform modified="1602549733166" name="tf-FT [Attr-Cube]: Budget Z-Out Bud Year" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-TJ [Cube] - BudYearETL to Budget Z-Out" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input nameref="Version" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#Value" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-TJ [Cube] - BudYearETL to Budget Z-Out" type="TableJoin" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Cube]: Retail Sales Weekly (Z-Out: Budget)" />
        <source nameref="tf-FT [Days]: Days in Budget Retail Year (Z-Out Budget)" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="ex-Jedox [Cube]: Retail Sales Weekly (Z-Out: Budget)">
            <key nameref="Day" />
          </left>
          <right nameref="tf-FT [Days]: Days in Budget Retail Year (Z-Out Budget)">
            <key nameref="BudgetDay" />
          </right>
        </join>
      </joins>
    </transform>
    <transform modified="1602549733166" name="tf-TJ [Cube]: Sales Daily - Days in CurrYearETL (Forecast_DW)" type="TableJoin" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-FT [Days]: Days in Curr Retail Year" />
        <source nameref="ex-Jedox [Cube]: Retail Sales Daily - Forecast-DW" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Days]: Days in Curr Retail Year">
            <key nameref="Day" />
          </left>
          <right nameref="ex-Jedox [Cube]: Retail Sales Daily - Forecast-DW">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform modified="1602549733166" name="tf-FT [Attr]: - Forecast Version - Forecast_DW" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-DW-Forecast" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input constant="Forecast_DW" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#VALUE" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-TJ [Attr]: Day In Curr Year to Z-Out Target" type="TableJoin" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-FT [Attr]: Days In Retail Year" />
        <source nameref="ex-Jedox [Cube]: Retail Sales Daily (Z-Out: Target)" />
      </sources>
      <joins persist="false">
        <join type="inner">
          <left nameref="tf-FT [Attr]: Days In Retail Year">
            <key nameref="AttrDay" />
          </left>
          <right nameref="ex-Jedox [Cube]: Retail Sales Daily (Z-Out: Target)">
            <key nameref="Day" />
          </right>
        </join>
      </joins>
    </transform>
    <transform modified="1602549733166" name="tf-FT [Attr]: Parameter - Retail Forecast Version - Z-Out Forecast_MMM" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Cube]: Retail Sales Daily  (Z-Out: Forecast_MMM)" />
      </sources>
      <functions>
        <function name="Retail Forecast Version" type="OlapData">
          <inputs>
            <input constant="Item" />
            <input constant="Retail Forecast Version" />
            <input constant="~" />
          </inputs>
          <parameters>
            <connection>Jedox</connection>
            <cube>#_Parameter</cube>
          </parameters>
        </function>
      </functions>
      <target>
        <coordinates>
          <coordinate name="Version">
            <input nameref="Retail Forecast Version" />
          </coordinate>
          <coordinate name="Day">
            <input nameref="Day" />
          </coordinate>
          <coordinate name="Currency">
            <input nameref="Currency" />
          </coordinate>
          <coordinate name="Store">
            <input nameref="Store" />
          </coordinate>
          <coordinate name="Region">
            <input nameref="Region" />
          </coordinate>
          <coordinate name="Comp Type">
            <input nameref="Comp Type" />
          </coordinate>
          <coordinate name="Dispatch Type">
            <input nameref="Dispatch Type" />
          </coordinate>
          <coordinate name="Weekly Retail Measure">
            <input nameref="Weekly Retail Measure" />
          </coordinate>
          <coordinate name="#Value">
            <input nameref="#Value" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-TJ [Cube]: Sales Daily - Budget Days in CurrYearETL (Z-Out Budget)" type="TableJoin" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Cube]: Parameter - BudYearETL" />
        <source nameref="ex-Jedox [Attr:Days]: RetailYear" />
      </sources>
      <joins persist="false">
        <join allColumns="false" type="inner" unique="false">
          <left nameref="ex-Jedox [Cube]: Parameter - BudYearETL">
            <key nameref="#Value" />
            <key nameref="#_LANGUAGE" />
          </left>
          <right nameref="ex-Jedox [Attr:Days]: RetailYear">
            <key nameref="#Value" />
            <key nameref="#_LANGUAGE" />
          </right>
          <conditions>
            <condition type="eq" />
            <condition type="eq" />
          </conditions>
        </join>
      </joins>
    </transform>
    <transform modified="1602549733166" name="tf-FT [Days]: Days in Budget Retail Year (Z-Out Budget)" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="tf-TJ [Cube]: Sales Daily - Budget Days in CurrYearETL (Z-Out Budget)" />
      </sources>
      <target>
        <coordinates>
          <coordinate name="BudgetDay">
            <input nameref="Day" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-FT[Attr-Cube]: Curr_Prev Year For Loop" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Cube]: Parameter (Prev Curr Year ETL) For Loop" />
      </sources>
      <functions>
        <function name="RetailYear" type="Concatenation">
          <inputs>
            <input nameref="#Value" />
            <input constant="R" />
          </inputs>
          <parameters />
        </function>
      </functions>
      <target>
        <coordinates>
          <coordinate name="FYear">
            <input nameref="RetailYear" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-FT[Attr-Cube]: Curr Year &amp; Forecast_MMM For Loop" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Cube]: Parameter (Curr Year ETL) For Loop" />
      </sources>
      <functions>
        <function name="RetailYear" type="Concatenation">
          <inputs>
            <input nameref="#Value" />
            <input constant="R" />
          </inputs>
          <parameters />
        </function>
        <function name="Forecast_MMM" type="OlapData">
          <inputs>
            <input constant="Item" />
            <input constant="Retail ETL Forecast" />
            <input constant="~" />
          </inputs>
          <parameters>
            <connection>Jedox</connection>
            <cube>#_Parameter</cube>
          </parameters>
        </function>
      </functions>
      <target>
        <coordinates>
          <coordinate name="FYear">
            <input nameref="RetailYear" />
          </coordinate>
          <coordinate name="Version">
            <input nameref="Forecast_MMM" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
    <transform modified="1602549733166" name="tf-FT[Attr-Cube]: Curr Year For Loop" type="FieldTransform" modifiedBy="ONEPAS\richards">
      <sources>
        <source nameref="ex-Jedox [Cube]: Parameter (Curr Year ETL) For Loop" />
      </sources>
      <functions>
        <function name="RetailYear" type="Concatenation">
          <inputs>
            <input nameref="#Value" />
            <input constant="R" />
          </inputs>
          <parameters />
        </function>
      </functions>
      <target>
        <coordinates>
          <coordinate name="FYear">
            <input nameref="RetailYear" />
          </coordinate>
        </coordinates>
      </target>
    </transform>
  </transforms>
  <loads>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily - Actual" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT [Cube]: Retail Sales Daily (Actuals Load)" />
      <connection nameref="Jedox" />
      <mode>add</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Actuals)" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <source nameref="tf-TJ [Cube]: Actual - Prev Curr Retail Years" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Day" name="Day" />
          <dimension input="Version" name="Version" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="ld-File TestFile" type="File" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT[Cube]: Retail Sales Weekly - (Act2Fcst - Format for Jedox Load)" />
      <connection nameref="MetalicusDailySales" />
      <mode>create</mode>
    </load>
    <load name="ld-Jedox [Cube] Retail Sales Daily - Forecast - Forecast Days" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT [Cube]: Forecast Load - Forecast Days" />
      <connection nameref="Jedox" />
      <mode>add</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Forecast)" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <source nameref="tf-TJ [Cube]: Sales Daily - Forecast Days in CurrYearETL" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Day" name="Day" />
          <dimension input="Version" name="Version" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load name="ld-Jedox [Cube] Retail Sales Daily - Forecast to Forecast_MMM" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT [Attr]: Parameter - Retail Forecast Version" />
      <connection nameref="Jedox" />
      <mode>add</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Store" name="Store" />
          <dimension input="Region" name="Region" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load name="ld-Jedox [Cube] Retail Sales Daily - Forecast - Actual Days" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT [Cube] Act2Forecast Actual Days" />
      <connection nameref="Jedox" />
      <mode>add</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Forecast_MMM)" type="Cube" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <source nameref="tf-TJ [Cube]: Sales Daily - Forecast Days in CurrYearETL (Z-Out Forecast_MMM)" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Day" name="Day" />
          <dimension input="Version" name="Version" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="MetalicusDailySalesFile" type="File" modifiedBy="ONEPAS\richards">
      <source nameref="Metalicus Daily Sales" />
      <connection nameref="MetalicusDailySales" />
      <mode>create</mode>
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube]: Retail Sales Weekly - Budget" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="ex-DW-Sales Budget" />
      <connection nameref="Jedox" />
      <mode>add</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Weekly (Z-Out Budget)" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT [Attr-Cube]: Budget Z-Out Bud Year" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Forecast_DW)" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="tf-TJ [Cube]: Sales Daily - Days in CurrYearETL (Forecast_DW)" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Day" name="Day" />
          <dimension input="Version" name="Version" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily - Forecast_DW" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT [Attr]: - Forecast Version - Forecast_DW" />
      <connection nameref="Jedox" />
      <mode>add</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Day" name="Day" />
          <dimension input="Version" name="Version" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Target)" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="tf-FT [Cube] Z-Out Target" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily - Target" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="ex-DW-Target" />
      <connection nameref="Jedox" />
      <mode>add</mode>
      <cube name="Retail Sales Daily" splash="disabled" cubeLayoutChangeMode="noneWithDefaultWrite">
        <dimensions>
          <dimension input="Version" name="Version" />
          <dimension input="Day" name="Day" />
          <dimension input="Currency" name="Currency" />
          <dimension input="Region" name="Region" />
          <dimension input="Store" name="Store" />
          <dimension input="Comp Type" name="Comp Type" />
          <dimension input="Dispatch Type" name="Dispatch Type" />
          <dimension input="Weekly Retail Measure" name="Weekly Retail Measure" />
        </dimensions>
      </cube>
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Actuals) For Loop" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="ex-Jedox [Cube Slice] (Z-Out: Actuals) For Loop" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <bulksize>100000</bulksize>
      <cube cubeLayoutChangeMode="noneWithDefaultWrite" name="Retail Sales Daily" splash="default" />
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Forecast Versions) For Loop" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="ex-Jedox [Cube Slice] (Z-Out: Forecast Versions) For Loop" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <bulksize>100000</bulksize>
      <cube cubeLayoutChangeMode="noneWithDefaultWrite" name="Retail Sales Daily" splash="default" />
    </load>
    <load modified="1602549733166" name="ld-Jedox [Cube] Retail Sales Daily (Z-Out Target) For Loop" type="Cube" modifiedBy="ONEPAS\richards">
      <source nameref="ex-Jedox [Cube Slice] (Z-Out: Target Version) For Loop" />
      <connection nameref="Jedox" />
      <mode>delete</mode>
      <bulksize>100000</bulksize>
      <cube cubeLayoutChangeMode="noneWithDefaultWrite" name="Retail Sales Daily" splash="default" />
    </load>
  </loads>
  <jobs>
    <job modified="1602549733166" name="01-02 Nightly - Retail Sales Daily Cube Forecast Load" type="Standard" modifiedBy="ONEPAS\richards">
      <executions>
        <execution nameref="Loop - Forecast Versions Z-OUT" type="job" />
        <execution nameref="ld-Jedox [Cube] Retail Sales Daily - Forecast - Actual Days" type="load" />
        <execution nameref="ld-Jedox [Cube] Retail Sales Daily - Forecast - Forecast Days" type="load" />
        <execution nameref="ld-Jedox [Cube] Retail Sales Daily - Forecast to Forecast_MMM" type="load" />
        <execution nameref="ld-Jedox [Cube] Retail Sales Daily - Forecast_DW" type="load" />
      </executions>
      <failStatus>error</failStatus>
    </job>
    <job modified="1602549733166" name="01-01 Nightly - Retail Sales Daily Cube Actual Load" type="Standard" modifiedBy="ONEPAS\richards">
      <executions>
        <execution nameref="Loop - Actual Z-OUT" type="job" />
        <execution nameref="ld-Jedox [Cube] Retail Sales Daily - Actual" type="load" />
      </executions>
      <comment><![CDATA[Zeros out the current year that is being loaded]]></comment>
      <failStatus>error</failStatus>
    </job>
    <job modified="1602549733166" name="01-00 Nightly - Retail Sales Daily  Cube Load" type="Standard" modifiedBy="ONEPAS\richards">
      <executions>
        <execution nameref="01-01 Nightly - Retail Sales Daily Cube Actual Load" type="job" />
        <execution nameref="01-02 Nightly - Retail Sales Daily Cube Forecast Load" type="job" />
        <execution nameref="Loop - Target Z-OUT" type="job" />
        <execution nameref="ld-Jedox [Cube] Retail Sales Daily - Target" type="load" />
      </executions>
      <failStatus>error</failStatus>
    </job>
    <job name="03-01 Manual - Retail Sales Daily - Budget - Z-Out" type="Standard" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <executions>
        <execution nameref="ld-Jedox [Cube] Retail Sales Weekly (Z-Out Budget)" type="load" />
      </executions>
    </job>
    <job name="03-02 Manual - Retail Sales Daily - Budget Load" type="Standard" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <executions>
        <execution nameref="ld-Jedox [Cube]: Retail Sales Weekly - Budget" type="load" />
      </executions>
    </job>
    <job name="03-00 Manual - Retail Sales Daily - Budget Load" type="Standard" modified="1602549733166" modifiedBy="ONEPAS\richards">
      <executions>
        <execution nameref="03-01 Manual - Retail Sales Daily - Budget - Z-Out" type="job" />
        <execution nameref="03-02 Manual - Retail Sales Daily - Budget Load" type="job" />
      </executions>
    </job>
    <job modified="1602549733166" name="Loop - Actual Z-OUT" type="Loop" modifiedBy="ONEPAS\richards">
      <execution nameref="ld-Jedox [Cube] Retail Sales Daily (Z-Out Actuals) For Loop" type="load" />
      <failStatus>error</failStatus>
      <loop nameref="tf-FT[Attr-Cube]: Curr_Prev Year For Loop" />
    </job>
    <job modified="1602549733166" name="Loop - Forecast Versions Z-OUT" type="Loop" modifiedBy="ONEPAS\richards">
      <execution nameref="ld-Jedox [Cube] Retail Sales Daily (Z-Out Forecast Versions) For Loop" type="load" />
      <failStatus>error</failStatus>
      <loop nameref="tf-FT[Attr-Cube]: Curr Year &amp; Forecast_MMM For Loop" />
    </job>
    <job modified="1602549733166" name="Loop - Target Z-OUT" type="Loop" modifiedBy="ONEPAS\richards">
      <execution nameref="ld-Jedox [Cube] Retail Sales Daily (Z-Out Target) For Loop" type="load" />
      <failStatus>error</failStatus>
      <loop nameref="tf-FT[Attr-Cube]: Curr Year For Loop" />
    </job>
  </jobs>
</project>
